<ion-item (click)="toggleAccordion()" lines="full" detail="false">
  <ion-label>
    <h2>{{ title }}</h2>
  </ion-label>
  <ion-icon
    slot="start"
    color="success"
    *ngIf="filledAreas >= 1"
    name="checkmark-circle-outline"
  ></ion-icon>
  <ion-chip slot="end" color="success" *ngIf="filledAreas >= 1">
    {{ filledAreas }}</ion-chip
  >
  <ion-icon slot="end" *ngIf="!isMenuOpen" name="caret-down-outline"></ion-icon>
  <ion-icon slot="end" *ngIf="isMenuOpen" name="caret-up-outline"></ion-icon>
</ion-item>
<ion-progress-bar
  color="{{ progressColor }}"
  value="{{ progressPercentage }}"
></ion-progress-bar>
<div class="areas" *ngIf="isMenuOpen">
  <ion-item>
    <ion-icon
      *ngIf="!_model.inspectionType"
      color="danger"
      slot="start"
      name="warning-outline"
    ></ion-icon>

    <ion-label position="floating">Inspection Type</ion-label>
    <ion-select
      interface="popover"
      [disabled]="readonly"
      [interfaceOptions]="{ cssClass: 'wider-popover' }"
      name="type"
      [(ngModel)]="_model.inspectionType"
      (ionChange)="AreaUpdated($event)"
    >
      <ion-select-option
        *ngFor="let item of listInspectionType; let i = index"
        [value]="item.value"
        >{{ item.name }}</ion-select-option
      >
    </ion-select>
  </ion-item>

  <ion-item lines="inset">
    <ion-icon
      *ngIf="!_model.dateTesed"
      color="danger"
      slot="start"
      name="warning-outline"
    ></ion-icon>

    <ion-label position="floating">Date Tesed</ion-label>
    <!-- <ion-datetime
      [disabled]="readonly"
      [(ngModel)]="_model.dateTesed"
      displayFormat="MMMM DD, YYYY"
      pickerFormat="MMMM DD YYYY "
    ></ion-datetime> -->

    <ion-datetime
      [disabled]="readonly"
      name="scheduleDateTime"
      #dateTesed="ngModel"
      [(ngModel)]="_model.dateTesed"
      displayFormat="MMMM DD, YYYY"
      pickerFormat="MMMM DD YYYY "
    ></ion-datetime>
  </ion-item>

  <app-moisture-mapping
    *ngFor="let area of _model.areamoistureMapping; let i = index"
    ngDefaultControl
    [readonly]="readonly"
    [title]="'Area ' + (i + 1)"
    [index]="i"
    (modelChanged)="AreaUpdated($event)"
    [(model)]="_model.areamoistureMapping[i]"
  ></app-moisture-mapping>

  <ion-item
    (click)="toggleAccordion()"
    lines="none"
    button
    class="ion-no-margin"
    detail="false"
  >
    <ion-label color="warning"> {{ "End " + title }}</ion-label>

    <ion-icon
      slot="end"
      *ngIf="!isMenuOpen"
      name="caret-down-outline"
    ></ion-icon>
    <ion-icon slot="end" *ngIf="isMenuOpen" name="caret-up-outline"></ion-icon>
  </ion-item>
</div>
